# CpuProject

**2. Архітектура**
* Інструкції зберігаються в ROM і займають 12 біт в кожній комірці: 4 біти - код операції, решта адреси даних. Всього комірок в ROM 256. Також він має 4 бітні шини даних та адреси.
* Процесор має всього 8 4-бітних регістрів загального використання та 1 регістр для зберігання прапорців. Також для зберігання даних використовується 4*16 RAM.
* Для виконання арифметичних та логічних операцій використовується 4-бітний ALU.
* Для послідовного виконання інструкцій використовується 8 бітний лічильник (2 4-бітні із серії 7400), операції умовних переходів виконуються, записуючи адресу потрібної іструкції ROM в лічильник.
Далі наведене схема процесора в Logisim:
![123](https://user-images.githubusercontent.com/47101236/71410781-50515200-264f-11ea-9a8f-272eefc34685.png)
**3. Логіка**
Процесор здійснює ту чи іншу операцію за допомогою контрольних бітів:
* Digit
* Jump (для операцій безумовного переходу)
* Alu (для операцій, які використовують Alu)
* AluLogic (для логічних операцій Alu)
* AluCarry (ставить cin Alu на одиничку, в даному процесорі використовується тільки для операції SUB)
* FWright (біт запису в регістр флагів прапорець, в даному процесорі використовується тільки для операції SUB)
* Adress (для операцій, які здійснюються з використанням даних з RAM)
* Write (прапорець запису в регістр чи RAM)
Ці біти визначаються за допомогою декодера коду операції:

![123](https://user-images.githubusercontent.com/47101236/71411098-a1157a80-2650-11ea-81af-d82ccdad5dee.png)

Далі табличка позначень різних операцій (r1, r2 - any register, immed - числове значення):


Operation              | Mnemonic                                                                                                                                                                                                                                                                                                                                       | Description
------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------
**0000**            | mvr r1, r2 | скопіювати вміст r2 в r1
**0001**            | mvd r1, immed | записати в регістр r1 immediate значення
**0010**            | mva r1, r2 | записати в комірку пам'яті RAM значення, що знаходиться в r2 (адреса комірки знаходиться в r1)
**0011**            | mvf r1, r2 | записати в регістр r1 значення, яке знаходиться в комірці RAM за адресою, що знаходиться в регістрі r2
**0001**            | mvd r1, immed | записати в регістр r1 immediate значення
**1001**            | add r1, r2 | записати в r1 суму r1 + r2
**0110**            | sub r1, r2 | записати в r1 різницю r1 - r2, також це використовується як порівняння r2 та r1 (записуються прапорці в регістр флагів)
**1010**            | nor r1, r2 | записати в r1 - r1 nor r2
**1100**            | jeq immed | пере

